# MongoDB 笔记

一个以 JSON 为数据模型的文档数据库

## 特点

- 建模为可选（可以不用先建模）
- JSON 数据模型比较适合开发者
- 横向扩展可以支撑很大数据量和并发

## 对比

![关系型](./imgs/2023-05-22_12-16-37.png)

## 优势

- 一目了然的对象模型
- 快速响应业务变化
  - 可动态修改字段
  - 同一集合可以包含不同字段（类型）的文档

- 最简单快速的开发方式
  - 数据引擎只需要在一个存储区域读写
  - 反范式、无关联的组织极大优化查询速度
- 原生的高可用和横向扩展能力

## 基础语法

- 安装
- 插入
- 查询

## 聚合查询

- Pipeline
- Stage

## 复制集

## 全家桶

## 模型设计基础

- 设计元素
  - 实体
    - 谁、什么、何时、何地、为何、如何
  - 属性
    - 描述实体里面的单个信息
  - 关系
    - 描述实体与实体之间的数据规则
    - 结构规则：1-N、N-1、N-N
    - 引用规则： 某些不能单独存在
- JSON 文档模型设计
  - 通过内嵌数组或引用字段来表示关系
  - 文档模型设计不遵从第三范式，允许冗余
  
- 文档模型的设计原则：性能和易用
- 什么时候使用引用
  - 内嵌文档大，数 MB 或者超过 16 MB
  -内嵌文档或数组元素会频繁修改
  - 内嵌数组元素会持续增长并且没有封顶。
