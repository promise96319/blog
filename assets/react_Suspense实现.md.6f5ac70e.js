import{_ as e,c as o,o as c,a as d}from"./app.e6e38190.js";var i="/assets/react-Suspense.cd7d3fda.png";const S='{"title":"Suspense \u5B9E\u73B0","description":"","frontmatter":{},"headers":[],"relativePath":"react/Suspense\u5B9E\u73B0.md","lastUpdated":1660013340000}',s={},t=d('<h1 id="suspense-\u5B9E\u73B0" tabindex="-1">Suspense \u5B9E\u73B0 <a class="header-anchor" href="#suspense-\u5B9E\u73B0" aria-hidden="true">#</a></h1><p><img src="'+i+'" alt=""></p><ol><li>\u5728<code>beginWork</code>\u65F6\uFF0C\u9047\u5230<code>Suspense</code>\uFF0C\u9ED8\u8BA4\u662F\u6B63\u5E38\u663E\u793A\u7EC4\u4EF6\uFF1A\u521B\u5EFA\u4E00\u4E2A<code>OffScreenComponent</code>\u6765\u8868\u793A\uFF0C\u6B64\u65F6<code>visible</code>\u4E3A<code>true</code>\u3002</li><li>\u5F53\u52A0\u8F7D\u5230\u7EC4\u4EF6\u5185\u90E8\u7684<code>promise</code>\u65F6\uFF0C\u7531\u4E8E\u7B2C\u4E00\u6B21\u6E32\u67D3\uFF0C\u6B64\u65F6\u8FD8\u672A\u52A0\u8F7D\u5B8C\u6210\uFF0C\u4F1A\u62A5\u9519\uFF0C\u629B\u51FA<code>promise</code>\u3002</li><li><code>handleError</code>\u6355\u6349\u5230\u9519\u8BEF\uFF0C\u9996\u5148\u5F00\u59CB<code>throwException</code>\uFF1A <ol><li>\u6807\u8BB0\u62A5\u9519\u7684<code>fiber.flags</code>\u4E3A<code>Incomplete</code>\u3002</li><li>\u5411\u4E0A\u67E5\u627E\uFF0C\u627E\u5230\u7B2C\u4E00\u4E2A<code>Suspense</code>\u3002</li><li>\u5728<code>Suspense.updateQueue</code>\u4E2D\u6DFB\u52A0\u62A5\u9519\u4FE1\u606F\uFF08\u4E5F\u5C31\u662F\u629B\u51FA\u7684<code>promise</code>\uFF09\u3002</li><li>\u901A\u8FC7<code>attachPingListener</code>\u65B9\u6CD5\u6267\u884C\u8BE5<code>promise</code>\uFF0C\u5E76\u5728<code>then</code>\u56DE\u8C03\u91CC\u6DFB\u52A0\u4E00\u4E2A\u66F4\u65B0\u4EFB\u52A1\u3002</li><li>\u6807\u8BB0<code>Suspense fiber flags</code>\u4E3A<code>ShouldCapture</code>\u3002</li></ol></li><li>\u4ECE\u62A5\u9519\u7684<code>fiber</code>\u5F00\u59CB\uFF0C\u6267\u884C<code>completeWork</code>\uFF1A <ol><li>\u5411\u4E0A\u627E\u5230<code>ShouldCapture</code>\u7684<code>Suspense</code>\uFF0C\u6807\u8BB0\u4E3A<code>DidCapture</code>\u3002</li><li>\u67E5\u627E\u8FC7\u7A0B\u4E2D\u9047\u5230\u7684<code>fiber</code>\uFF0C\u6807\u8BB0\u4E3A<code>Incomplete</code>\u3002</li><li>\u8FD4\u56DE\u6700\u7EC8\u7684<code>fiber</code>\uFF1A<code>Suspense</code>\u6216\u8005<code>HostRoot</code>\uFF08\u6CA1\u627E\u5230<code>Suspense</code>\uFF09\u3002</li></ol></li><li>\u5BF9\u627E\u5230\u7684<code>Suspense</code>\u91CD\u65B0\u5F00\u59CB<code>beginWork</code>\u3002\u6B64\u65F6<code>DidCapture</code>\u4E3A<code>true</code>\uFF0C\u663E\u793A<code>fallback</code>\u3002<code>Suspense</code>\u7684<code>child</code>\u6307\u5411<code>OffScreenComponent</code>\uFF08\u5185\u90E8\u5305\u542B\u4E3B\u8981\u7684\u7EC4\u4EF6\uFF09\uFF0C<code>OffScreenComponent</code>\u7684<code>sibling</code>\u6307\u5411<code>fallbackChildFragment</code>\uFF08\u5360\u4F4D\u7EC4\u4EF6\uFF09\u3002\u800C\u771F\u6B63\u8FDB\u884C\u6E32\u67D3\u7684\u662F<code>fallbackChildFragment</code>\u3002</li><li>\u5728<code>completeWork</code>\u7684\u65F6\u5019\uFF0C\u5BF9\u4E8E<code>Suspense fiber</code>\uFF0C\u68C0\u6D4B\u5230\u5DF2\u7ECF\u4ECE\u663E\u793A<code>primary</code>\uFF08\u4E3B\u7EC4\u4EF6\uFF09\u53D8\u4E3A\u663E\u793A<code>fallback</code>\uFF08\u5360\u4F4D\u7EC4\u4EF6\uFF09\u3002\u5982\u679C\u6B64\u65F6<code>updateQueue</code>\u5B58\u5728\uFF0C\u8BF4\u660E\u8FD8\u6709\u5F85\u66F4\u65B0\u7684\u4EFB\u52A1\uFF0C\u6807\u8BB0<code>fiber</code>\u4E3A<code>Update</code>\u3002</li><li>\u5728<code>commitWork</code>\u9636\u6BB5\uFF0C\u5BF9\u4E8E\u6807\u8BB0<code>Update</code>\u7684<code>Suspense</code>\uFF0C\u4F1A\u8C03\u7528<code>attachSuspenseRetryListeners</code>\u5C06\u6240\u6709\u5F02\u6B65\u4EFB\u52A1\u7684<code>then</code>\u6DFB\u52A0\u66F4\u65B0\u4EFB\u52A1\uFF0C\u5BF9\u5E94\u7684<code>lane</code>\u4E3A<code>retryLane</code>\u3002(\u5982\u679C\u4E4B\u524D\u5DF2\u7ECF\u66F4\u65B0\u8FC7\u4E86\uFF0C\u90A3\u4E48\u4E0D\u9700\u8981\u91CD\u590D\u66F4\u65B0\uFF0C\u8FD9\u91CC\u53EA\u662F\u4F5C\u4E3A\u4FDD\u969C)</li><li>\u7B49\u5230<code>promise</code>\u52A0\u8F7D\u5B8C\u6210\uFF0C\u91CD\u65B0\u5F00\u59CB\u66F4\u65B0\uFF0C\u6B64\u65F6\u5C31\u80FD\u6B63\u5E38\u7684\u663E\u793A<code>primary</code>\u7EC4\u4EF6\u4E86\u3002</li></ol>',3),l=[t];function r(a,n,p,u,_,f){return c(),o("div",null,l)}var h=e(s,[["render",r]]);export{S as __pageData,h as default};
