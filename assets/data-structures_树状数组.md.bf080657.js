import{_ as n,c as s,o as a,a as p}from"./app.f27e6278.js";var t="/assets/fenwick.56a31071.png";const b='{"title":"\u6811\u72B6\u6570\u7EC4","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u4ECB\u7ECD","slug":"\u4ECB\u7ECD"},{"level":2,"title":"\u539F\u7801","slug":"\u539F\u7801"},{"level":2,"title":"\u53CD\u7801","slug":"\u53CD\u7801"},{"level":2,"title":"\u8865\u7801","slug":"\u8865\u7801"},{"level":2,"title":"\u5DE5\u4F5C\u539F\u7406","slug":"\u5DE5\u4F5C\u539F\u7406"},{"level":2,"title":"x & -x","slug":"x-x"},{"level":2,"title":"\u5B9E\u73B0","slug":"\u5B9E\u73B0"},{"level":2,"title":"\u53C2\u8003","slug":"\u53C2\u8003"}],"relativePath":"data-structures/\u6811\u72B6\u6570\u7EC4.md","lastUpdated":1659089884000}',o={},e=p(`<h1 id="\u6811\u72B6\u6570\u7EC4" tabindex="-1">\u6811\u72B6\u6570\u7EC4 <a class="header-anchor" href="#\u6811\u72B6\u6570\u7EC4" aria-hidden="true">#</a></h1><h2 id="\u4ECB\u7ECD" tabindex="-1">\u4ECB\u7ECD <a class="header-anchor" href="#\u4ECB\u7ECD" aria-hidden="true">#</a></h2><p>\u6811\u72B6\u6570\u7EC4\u7684\u4EE3\u7801\u8981\u6BD4\u7EBF\u6BB5\u6811\u77ED\uFF0C\u601D\u7EF4\u66F4\u6E05\u6670\uFF0C\u901F\u5EA6\u4E5F\u66F4\u5FEB\uFF0C<strong>\u5728\u89E3\u51B3\u4E00\u4E9B\u5355\u70B9\u4FEE\u6539\u7684\u95EE\u9898\u65F6\uFF0C\u6811\u72B6\u6570\u7EC4\u662F\u4E0D\u4E8C\u4E4B\u9009</strong>\u3002</p><h2 id="\u539F\u7801" tabindex="-1">\u539F\u7801 <a class="header-anchor" href="#\u539F\u7801" aria-hidden="true">#</a></h2><p>\u539F\u7801\u5C31\u662F\u7B26\u53F7\u4F4D\u52A0\u4E0A\u771F\u503C\u7684\u7EDD\u5BF9\u503C, \u5373\u7528\u7B2C\u4E00\u4F4D\u8868\u793A\u7B26\u53F7, \u5176\u4F59\u4F4D\u8868\u793A\u503C. \u6BD4\u5982\u5982\u679C\u662F8\u4F4D\u4E8C\u8FDB\u5236\uFF1A</p><div class="language-javascript"><pre><code><span class="token punctuation">[</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span>\u539F <span class="token operator">=</span> <span class="token number">0000</span> <span class="token number">0001</span>

<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>\u539F <span class="token operator">=</span> <span class="token number">1000</span> <span class="token number">0001</span>
</code></pre></div><h2 id="\u53CD\u7801" tabindex="-1">\u53CD\u7801 <a class="header-anchor" href="#\u53CD\u7801" aria-hidden="true">#</a></h2><ul><li>\u6B63\u6570\u7684\u53CD\u7801\u662F\u5176\u672C\u8EAB</li><li>\u8D1F\u6570\u7684\u53CD\u7801\u662F\u5728\u5176\u539F\u7801\u7684\u57FA\u7840\u4E0A, \u7B26\u53F7\u4F4D\u4E0D\u53D8\uFF0C\u5176\u4F59\u5404\u4E2A\u4F4D\u53D6\u53CD</li></ul><div class="language-javascript"><pre><code><span class="token punctuation">[</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">00000001</span><span class="token punctuation">]</span>\u539F <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">00000001</span><span class="token punctuation">]</span>\u53CD

<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10000001</span><span class="token punctuation">]</span>\u539F <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">11111110</span><span class="token punctuation">]</span>\u53CD
</code></pre></div><h2 id="\u8865\u7801" tabindex="-1">\u8865\u7801 <a class="header-anchor" href="#\u8865\u7801" aria-hidden="true">#</a></h2><ul><li>\u6B63\u6570\u7684\u8865\u7801\u5C31\u662F\u5176\u672C\u8EAB</li><li>\u8D1F\u6570\u7684\u8865\u7801\u662F\u5176\u53CD\u7801 + 1</li></ul><div class="language-javascript"><pre><code><span class="token punctuation">[</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">00000001</span><span class="token punctuation">]</span>\u539F <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">00000001</span><span class="token punctuation">]</span>\u53CD <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">00000001</span><span class="token punctuation">]</span>\u8865

<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10000001</span><span class="token punctuation">]</span>\u539F <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">11111110</span><span class="token punctuation">]</span>\u53CD <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">11111111</span><span class="token punctuation">]</span>\u8865
</code></pre></div><h2 id="\u5DE5\u4F5C\u539F\u7406" tabindex="-1">\u5DE5\u4F5C\u539F\u7406 <a class="header-anchor" href="#\u5DE5\u4F5C\u539F\u7406" aria-hidden="true">#</a></h2><p>\u4E0B\u9762\u8FD9\u5F20\u56FE\u5C55\u793A\u4E86\u6811\u72B6\u6570\u7EC4\u7684\u5DE5\u4F5C\u539F\u7406\uFF1A</p><p><img src="`+t+`" alt=""></p><p>\u8FD9\u4E2A\u7ED3\u6784\u548C\u7EBF\u6BB5\u6811\u6709\u4E9B\u7C7B\u4F3C\uFF1A\u7528\u4E00\u4E2A\u5927\u8282\u70B9\u8868\u793A\u4E00\u4E9B\u5C0F\u8282\u70B9\u7684\u4FE1\u606F\uFF0C\u8FDB\u884C\u67E5\u8BE2\u7684\u65F6\u5019\u53EA\u9700\u8981\u67E5\u8BE2\u4E00\u4E9B\u5927\u8282\u70B9\u800C\u4E0D\u662F\u6240\u6709\u7684\u5C0F\u8282\u70B9\u3002</p><h2 id="x-x" tabindex="-1">x &amp; -x <a class="header-anchor" href="#x-x" aria-hidden="true">#</a></h2><p><code>x &amp; -x</code> \u7528\u4E8E\u5224\u65AD\u6811\u72B6\u6570\u7EC4\u7BA1\u7406\u54EA\u4E9B\u6570\uFF1A</p><div class="language-javascript"><pre><code><span class="token number">8</span> <span class="token operator">&amp;</span> <span class="token operator">-</span><span class="token number">8</span>
<span class="token number">0b1000</span> <span class="token operator">&amp;</span> <span class="token operator">-</span><span class="token number">0b1000</span> <span class="token operator">=&gt;</span> <span class="token number">0b1000</span> <span class="token operator">&amp;</span> <span class="token number">0b1000</span> <span class="token operator">=</span> <span class="token number">8</span> 
<span class="token number">7</span> <span class="token operator">&amp;</span> <span class="token operator">-</span><span class="token number">7</span>
<span class="token number">0b111</span> <span class="token operator">&amp;</span> <span class="token operator">-</span><span class="token number">0b111</span> <span class="token operator">=&gt;</span> <span class="token number">0b111</span> <span class="token operator">&amp;</span> <span class="token number">0b001</span> <span class="token operator">=</span> <span class="token number">1</span>
</code></pre></div><h2 id="\u5B9E\u73B0" tabindex="-1">\u5B9E\u73B0 <a class="header-anchor" href="#\u5B9E\u73B0" aria-hidden="true">#</a></h2><div class="language-javascript"><pre><code><span class="token keyword">class</span> <span class="token class-name">FenwickTree</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">arraySize</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>arraySize <span class="token operator">=</span> arraySize
    <span class="token comment">// \u6570\u7EC4\u957F\u5EA6 + 1</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>treeArray <span class="token operator">=</span> <span class="token function">Array</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>arraySize <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">increase</span><span class="token punctuation">(</span><span class="token parameter">position<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">&lt;</span> <span class="token number">1</span> <span class="token operator">||</span> position <span class="token operator">&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>arraySize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;position \u8D85\u51FA\u8303\u56F4\u4E86&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// \u6BCF\u6B21\u6539\u53D8\u4E00\u4E2A\u5143\u7D20\u65F6\uFF0C\u540E\u7EED\u7BA1\u7740\u8BE5\u5143\u7D20\u7684\u503C\u4E5F\u8981\u968F\u4E4B\u53D8\u5316\u3002</span>
    <span class="token comment">// \u8FD9\u91CC\u4F53\u73B0\u4E86\u5355\u70B9\u4FEE\u6539\u503C\u7684\u4F18\u52BF\uFF0C\u53EA\u9700\u8981\u66F4\u6539\u540E\u7EED\u5BF9\u5E94\u7684\u5143\u7D20\u5373\u53EF\uFF0C\u4E0D\u9700\u8981\u6240\u6709\u7684\u503C\u90FD\u66F4\u6539\u3002</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> position<span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>arraySize<span class="token punctuation">;</span>i <span class="token operator">+=</span> <span class="token punctuation">(</span>i <span class="token operator">&amp;</span> <span class="token operator">-</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>treeArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> value
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token keyword">this</span>
  <span class="token punctuation">}</span>

  <span class="token function">query</span><span class="token punctuation">(</span><span class="token parameter">position</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">&lt;</span> <span class="token number">1</span> <span class="token operator">||</span> position <span class="token operator">&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>arraySize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;position \u8D85\u51FA\u8303\u56F4\u4E86&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token comment">// \u627E\u5230\u5F53\u524D\u5143\u7D20\u7BA1\u7740\u7684\u5143\u7D20\uFF0C\u7136\u540E\u627E\u5230\u4E4B\u524D\u5143\u7D20\u7BA1\u7740\u7684\u5143\u7D20\uFF0C\u4F9D\u6B21\u5411\u524D\u5BFB\u627E\u3002</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> position<span class="token punctuation">;</span>i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">-=</span> <span class="token punctuation">(</span>i <span class="token operator">&amp;</span> <span class="token operator">-</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      sum <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>treeArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> sum
  <span class="token punctuation">}</span>

  <span class="token function">queryRange</span><span class="token punctuation">(</span><span class="token parameter">leftIndex<span class="token punctuation">,</span> rightIndex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>leftIndex <span class="token operator">&gt;</span> rightIndex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;\u5DE6index\u4E0D\u80FD\u8D85\u8FC7\u53F3index&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>leftIndex <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>rightIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>rightIndex<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>leftIndex <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="\u53C2\u8003" tabindex="-1">\u53C2\u8003 <a class="header-anchor" href="#\u53C2\u8003" aria-hidden="true">#</a></h2><ul><li><a href="https://www.cnblogs.com/zhangziqiu/archive/2011/03/30/computercode.html" target="_blank" rel="noopener noreferrer">\u539F\u7801/\u53CD\u7801/\u8865\u7801</a></li><li><a href="https://oi-wiki.org/ds/fenwick/" target="_blank" rel="noopener noreferrer">fenwick</a></li></ul>`,23),c=[e];function l(r,u,k,i,d,h){return a(),s("div",null,c)}var y=n(o,[["render",l]]);export{b as __pageData,y as default};
