import{_ as s,o as a,c as n,a as e}from"./app.f42e61e3.js";const o="/assets/chrome-inspect-01.f07d063c.jpg",l="/assets/chrome-inspect-02.0c772fbe.jpg",p="/assets/chrome-vscode-debugger.51d16334.png",C=JSON.parse('{"title":"webpack 源码调试","description":"","frontmatter":{},"headers":[{"level":2,"title":"安装webpack/webpack-cli","slug":"安装webpack-webpack-cli","link":"#安装webpack-webpack-cli","children":[]},{"level":2,"title":"添加inspect","slug":"添加inspect","link":"#添加inspect","children":[]},{"level":2,"title":"运行webpack","slug":"运行webpack","link":"#运行webpack","children":[]},{"level":2,"title":"chrome调试","slug":"chrome调试","link":"#chrome调试","children":[]},{"level":2,"title":"vscode调试","slug":"vscode调试","link":"#vscode调试","children":[]},{"level":2,"title":"小技巧","slug":"小技巧","link":"#小技巧","children":[]},{"level":2,"title":"参考文章","slug":"参考文章","link":"#参考文章","children":[]}],"relativePath":"webpack/webpack源码调试.md","lastUpdated":1684811674000}'),c={name:"webpack/webpack源码调试.md"},t=e(`<h1 id="webpack-源码调试" tabindex="-1">webpack 源码调试 <a class="header-anchor" href="#webpack-源码调试" aria-hidden="true">#</a></h1><h2 id="安装webpack-webpack-cli" tabindex="-1">安装webpack/webpack-cli <a class="header-anchor" href="#安装webpack-webpack-cli" aria-hidden="true">#</a></h2><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">devDependencies</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">webpack</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">^5.33.2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">webpack-cli</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">^4.6.0</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="添加inspect" tabindex="-1">添加inspect <a class="header-anchor" href="#添加inspect" aria-hidden="true">#</a></h2><p>找到<code>node_modules/.bin/</code>目录，分别在<code>webpack.js</code>和<code>webpack-cli.js</code>文件的首行后面添加<code>--inspect-brk</code>：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 添加前</span></span>
<span class="line"><span style="color:#A6ACCD;">#</span><span style="color:#89DDFF;">!/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">bin</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">env node</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 添加后</span></span>
<span class="line"><span style="color:#A6ACCD;">#</span><span style="color:#89DDFF;">!/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">bin</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">env node </span><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">inspect</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">brk</span></span>
<span class="line"></span></code></pre></div><h2 id="运行webpack" tabindex="-1">运行webpack <a class="header-anchor" href="#运行webpack" aria-hidden="true">#</a></h2><p>定义<code>webpack.config.js</code>文件 ，然后在<code>package.json</code>中定义打包命令：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">scripts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">build</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">webpack</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">},</span></span>
<span class="line"></span></code></pre></div><p>运行<code>npm run build</code>进行打包，命令窗口会出现以下内容：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">Debugger listening on </span><span style="color:#FFCB6B;">ws</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//127.0.0.1:9229/8d04b555-653d-45b0-9d19-00f63aed08b1</span></span>
<span class="line"><span style="color:#A6ACCD;">For help</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">see</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">https</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//nodejs.org/en/docs/inspector</span></span>
<span class="line"></span></code></pre></div><h2 id="chrome调试" tabindex="-1">chrome调试 <a class="header-anchor" href="#chrome调试" aria-hidden="true">#</a></h2><p>访问<code>ws://127.0.0.1:9229/8d04b555-653d-45b0-9d19-00f63aed08b1</code>网址并打开<code>chrome</code>控制台:</p><p><img src="`+o+'" alt="img"></p><p>会出现<code>node</code>的<code>logo</code>，点击该<code>logo</code>，即可开始打断点调试：</p><p><img src="'+l+`" alt="img"></p><h2 id="vscode调试" tabindex="-1">vscode调试 <a class="header-anchor" href="#vscode调试" aria-hidden="true">#</a></h2><p>如果想在<code>vscode</code>中调试，手写需要按<code>chrome</code>调试的方法完整操作一遍。然后在<code>vscode</code>中下载<code>chrome</code>调试插件：<code>Debugger for Chrome</code>。下载完成后点击插件提供的运行按钮，选择<code>node</code>环境。在<code>.vscode/</code>目录下会生成一个<code>launch.json</code>文件，将文件替换成一下内容：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">version</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0.2.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">configurations</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">: [</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">pwa-node</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">request</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">launch</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Debug webpack</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">skipFiles</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> [</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&lt;node_internals&gt;/**</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">        ]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">program</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\${workspaceFolder}/index.js</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    ]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>最终就可以在<code>vscode</code>中调试了： <img src="`+p+'" alt="img"></p><h2 id="小技巧" tabindex="-1">小技巧 <a class="header-anchor" href="#小技巧" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">调试文档</p><p>debug: <a href="https://webpack.docschina.org/contribute/debugging/" target="_blank" rel="noreferrer">https://webpack.docschina.org/contribute/debugging/</a> setup: <a href="https://github.com/webpack/webpack/blob/main/_SETUP.md" target="_blank" rel="noreferrer">https://github.com/webpack/webpack/blob/main/_SETUP.md</a></p></div><ul><li><code>webpack/examples/</code> 目录下有各种功能的 <code>demo</code>，通过 <code>yarn &amp; yarn link &amp; yarn link webpack</code> 建立软连接，然后再 <code>/examples/xxxx</code> 目录下运行 <code>webpack</code> 即可测试相关功能。</li></ul><h2 id="参考文章" tabindex="-1">参考文章 <a class="header-anchor" href="#参考文章" aria-hidden="true">#</a></h2><ul><li><a href="https://segmentfault.com/a/1190000023734819" target="_blank" rel="noreferrer">https://segmentfault.com/a/1190000023734819</a></li></ul>',25),r=[t];function i(D,d,F,y,u,h){return a(),n("div",null,r)}const g=s(c,[["render",i]]);export{C as __pageData,g as default};
