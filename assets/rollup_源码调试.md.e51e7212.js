import{_ as s,o as a,c as l,a as e}from"./app.5a1d1f50.js";const n="/assets/rollup-dist-directory.f353f1a9.png",o="/assets/rollup-debug-url.d1c90576.jpg",p="/assets/rollup-debug-node-logo.80fda00e.jpg",c="/assets/rollup-debug-break.d3909d54.jpg",D=JSON.parse('{"title":"如何调试 rollup 源码？","description":"","frontmatter":{},"headers":[{"level":2,"title":"1. 拉取代码","slug":"_1-拉取代码","link":"#_1-拉取代码","children":[]},{"level":2,"title":"2. 安装依赖","slug":"_2-安装依赖","link":"#_2-安装依赖","children":[]},{"level":2,"title":"3. 添加--inspect-brk","slug":"_3-添加-inspect-brk","link":"#_3-添加-inspect-brk","children":[]},{"level":2,"title":"4. 建立rollup软连接","slug":"_4-建立rollup软连接","link":"#_4-建立rollup软连接","children":[]},{"level":2,"title":"5. 使用rollup","slug":"_5-使用rollup","link":"#_5-使用rollup","children":[]},{"level":2,"title":"6. 运行","slug":"_6-运行","link":"#_6-运行","children":[]},{"level":2,"title":"7. 浏览器调试","slug":"_7-浏览器调试","link":"#_7-浏览器调试","children":[]}],"relativePath":"rollup/源码调试.md","lastUpdated":1694075415000}'),t={name:"rollup/源码调试.md"},r=e(`<h1 id="如何调试-rollup-源码" tabindex="-1">如何调试 rollup 源码？ <a class="header-anchor" href="#如何调试-rollup-源码" aria-hidden="true">#</a></h1><h2 id="_1-拉取代码" tabindex="-1">1. 拉取代码 <a class="header-anchor" href="#_1-拉取代码" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">clone</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">https://github.com/rollup/rollup.git</span></span>
<span class="line"></span></code></pre></div><h2 id="_2-安装依赖" tabindex="-1">2. 安装依赖 <a class="header-anchor" href="#_2-安装依赖" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">yarn</span></span>
<span class="line"></span></code></pre></div><p>运行命令后会自动打包生成<code>dist</code>目录。</p><h2 id="_3-添加-inspect-brk" tabindex="-1">3. 添加--inspect-brk <a class="header-anchor" href="#_3-添加-inspect-brk" aria-hidden="true">#</a></h2><p>在<code>rollup</code>目录中找到<code>dist/bin/rollup</code>文件，在第一行中添加<code>--inspect-brk</code>后缀。</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 添加前</span></span>
<span class="line"><span style="color:#BABED8;">#</span><span style="color:#89DDFF;">!/</span><span style="color:#BABED8;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">bin</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">env node</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 添加后</span></span>
<span class="line"><span style="color:#BABED8;">#</span><span style="color:#89DDFF;">!/</span><span style="color:#BABED8;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">bin</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">env node </span><span style="color:#89DDFF;">--</span><span style="color:#BABED8;">inspect</span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;">brk</span></span>
<span class="line"></span></code></pre></div><p>如下所示：</p><p><img src="`+n+`" alt="dist目录"></p><h2 id="_4-建立rollup软连接" tabindex="-1">4. 建立rollup软连接 <a class="header-anchor" href="#_4-建立rollup软连接" aria-hidden="true">#</a></h2><p>在<code>rollup</code>目录中执行<code>yarn link</code>建立<code>rollup</code>的软连接。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">rollup</span></span>
<span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">link</span></span>
<span class="line"></span></code></pre></div><h2 id="_5-使用rollup" tabindex="-1">5. 使用rollup <a class="header-anchor" href="#_5-使用rollup" aria-hidden="true">#</a></h2><p>新建一个工程目录，比如<code>study-rollup</code>（可以自己随意起名），然后链接<code>rollup</code>：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 进入 study-rollup 目录</span></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">study-rollup</span></span>
<span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">link</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">rollup</span></span>
<span class="line"></span></code></pre></div><h2 id="_6-运行" tabindex="-1">6. 运行 <a class="header-anchor" href="#_6-运行" aria-hidden="true">#</a></h2><p>在终端中运行<code>rollup</code>命令（也可以在<code>package.json</code>的<code>scripts</code>中定义命令）。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 进入 study-rollup 目录</span></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">study-rollup</span></span>
<span class="line"><span style="color:#FFCB6B;">rollup</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-c</span></span>
<span class="line"></span></code></pre></div><p>运行后会出现一个<code>ws:</code>开头的<code>url</code>：</p><p><img src="`+o+`" alt="调试地址"></p><h2 id="_7-浏览器调试" tabindex="-1">7. 浏览器调试 <a class="header-anchor" href="#_7-浏览器调试" aria-hidden="true">#</a></h2><p>在浏览器中打开上一个步骤中的<code>url</code>，如：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 注意：每次运行时的地址不一样</span></span>
<span class="line"><span style="color:#FFCB6B;">ws</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//127.0.0.1:9229/012b3b38-94de-4d45-b899-f629917c52c7</span></span>
<span class="line"></span></code></pre></div><p>打开<code>Chrome</code>控制台，会发现一个<code>node</code>的<code>logo</code>：</p><p><img src="`+p+'" alt="node logo"></p><p>点击该<code>logo</code>，会弹出一个窗口，找到<code>Sources</code>选项，通过<code>Add folder to workspace</code>将我们前面下载好的<code>rollup</code>包导入进来，然后找到<code>rollup</code>的源码入口，打上断点，就可以调试了。</p><p><img src="'+c+'" alt="Chrome 调试"></p>',29),i=[r];function d(u,h,y,_,b,g){return a(),l("div",null,i)}const E=s(t,[["render",d]]);export{D as __pageData,E as default};
